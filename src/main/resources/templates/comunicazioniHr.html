<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<title>Comunicazioni HR</title>
	<meta name="description" content="Questo Ã¨ un profilo admin">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Add text library -->
	<link href='https://fonts.googleapis.com/css?family=Montserrat'
	rel='stylesheet' type='text/css'>
	<!-- Add icon library -->
	<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
	integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
	crossorigin="anonymous">

	<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
	integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
	crossorigin="anonymous"></script>
	<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
	crossorigin="anonymous"></script>

	<link rel="stylesheet" content-type="" th:href="@{/view/cssGio/style.css}">

	<style media="screen">
	.image-cont {
		position: relative;
		text-align: center;
		color: white;
	}
	/* Centered text */
	.centered {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
	}

	.nav-link:hover {
		color: #ECF260;
		font-weight: 600;
	}

	.logo:hover {
		opacity: 1;
	}

	.logo {
		opacity: 0.5;
	}

	nav {
		font-size: 20px;
		color: #F3F3F3;
		width: 100%
	}

	.casa:hover {
		opacity: 0.8 !important;
	}
</style>

</head>
<body th:with="GHR = ${#authorization.expression('hasAuthority(''GHR'')')}, GS = ${#authorization.expression('hasAuthority(''GS'')')}"
	  th:style="'background-image: url(' + @{/view/MyWork/images/carbonio.jpg} +');'">

	<nav class="navbar navbar-expand-lg bg-dark navbar-dark justify-content-end">
		<a class="navbar-brand logo" th:href="@{/homepage/}">
			<img th:src="@{/view/MyWork/images/casabianca.png}" width="30px" alt="homeBianca.png" style="opacity: 0.9" class="img-fluid">
		</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
				<ul class="navbar-nav">
					<li class="nav-item mr-3 mt-3">
						<a class="nav-link"
						th:href="@{/my-life1/}">MY LIFE
					</a>
				</li>
				<li class="nav-item mr-3 mt-3">
					<a class="nav-link"
					th:href="@{/my-work/}">MY WORK
				</a>
			</li>
			<li class="nav-item mr-3 mt-3 active">
				<a class="nav-link"
				th:href="@{/my-work/comunicazioni/}">COMUNICAZIONI HR
			</a>
		</li>
		<li class="nav-item mr-3 mt-3">
			<a class="nav-link"
			th:href="@{/my-work/comunicazioni/moduli/}">MODULI
		</a>
	</li>
	<li class="nav-item mr-3 mt-3"><a class="nav-link"
		href="http://polyedro.erretechnology.com/www/" target="blank">POLYEDRO
	</a>
</li>
<li th:if="${utenteDati.setNotifiche != null}"
class="nav-item avatar dropdown " style="cursor: pointer">
<a class="nav-link dropdown-toggle waves-effect waves-light" id="navbarDropdownMenuLink-5" data-toggle="dropdown"
aria-haspopup="true" aria-expanded="true">
<span class="badge badge-danger mr-n4" th:text="${utenteDati.setNotifiche.size}">
</span>
<i class="fa fa-bell mr-n4"></i>
</a>
<div
class="dropdown-menu scrollable-menu dropdown-menu-lg-right dropdown-secondary"
th:if="${utenteDati.setNotifiche.size > 0}"
aria-labelledby="navbarDropdownMenuLink-5">
<div class="dropdown-item waves-effect waves-light"
th:each="i:${#numbers.sequence(utenteDati.setNotifiche.size() - 1, 0, -1)}"
th:with="notifica=${utenteDati.setNotifiche[i]}">
<a th:href="@{/profilo/elimina-notifica/{id}(id = ${notifica.id})}">
	<div>
		<p class="font-weight-bold"
		th:text="${notifica.utente.nome} + ' ' + ${notifica.utente.cognome}+ ' ' "
		style="COLOR: BLACK">
	</p>
	<p class="mt-n3" th:text="${notifica.descrizione}"
	style="COLOR: BLACK">
</p>
<p class="p mt-n2"
th:utext="${#dates.format(notifica.timestamp*1000, 'dd/MM/yyyy, HH:mm')}"
style="font-size: 10px; color: black"></p>
</div>
</a>
<hr>
</div>
</div>
</li>
<li class="nav-item">
	<a th:href="@{/profilo/}">
		<img th:src="'data:image/jpeg;base64,' + ${utenteDati.immagine.getImgData(utenteDati.immagine.data)}"
		alt="utente" title="utente" class="immagineUtente img-fluid"
		id="utente-foto-profilo" style="border-radius: 50%;">
	</a>
</li>
</ul>
</div>
</nav>


<div class="container">
	<div class="row justify-content-center mt-5">

		<!-- COLONNA COMUNICAZIONI -->
		<div class="col-xs-8 col-sm-8 col-lg-8 col-xl-8">

			<div class="container text-center">
				<h2 class="h2">COMUNICAZIONI</h2>
			</div>
			<div class="container-fluid text-center mb-3" th:if="${GHR}">
				<a class="aggiungi" th:href="@{/my-work/comunicazioni/hr}"
				style="text-decoration: none; color: #F3F3F3;"> <img
				class="mr-2" th:src="@{/view/MyWork/images/more.png}" width="30px">Aggiungi
				o elimina comunicazioni
			</a>
		</div>

		<div class="container">
			<div id="comunicazione" class="mt-3 mb-3"
			th:each="comunicazione: ${comunicazioni}">
			<img th:src="@{/view/MyWork/images/pdf-icon.png}" style="float: right;"
			width="30px"> <a
			th:href="@{/my-work/comunicazioni/hr/download(id=${comunicazione.id})}"
			th:download="${comunicazione.nome}" style="text-align: right">
			<img th:src="@{/view/MyWork/images/download.png.png}"
			style="float: right;" width="35px">
		</a>
		<p
		th:text="${#dates.format(comunicazione.timestamp*1000, 'dd/MM/yyyy')}">
	</p>
	<h4 class="h4" th:text="${comunicazione.descrizione}"
	style="color: #F3F3F3"></h4>
	<hr style="background-color: #F3F3F3">
</div>
<div class="container-fluid  text-center">
	<a class="btn mt-2" style="background-color: blue; color: #f3f3f3"
	th:href="@{/my-work/comunicazioni/hr/elenco}"
	type="button" id="button">Visualizza tutto</a>
</div>

</div>

</div>

<!-- COLONNA SONDAGGI -->

<div class="col-xs-8 col-sm-8 col-md-7 col-lg-6 col-xl-4 mt-5">
	<div class="container text-center">
		<h2 class="h2">SONDAGGI</h2>
	</div>

	<div class="container text-center mb-3" th:if="${GS}">
		<a class="aggiungi" th:href="@{/my-work/sondaggi/aggiungi}" style="text-decoration: none; color: #F3F3F3;">
			<img class="mr-2" th:src="@{/view/MyWork/images/more.png}" width="30px">Aggiungi sondaggio
		</a>
	</div>
	<div id="comunicazione" class="row mb-3 mt-3" th:each="sondaggi : ${sondaggi}">
		<div class="col-xs-2 col-sm-2 col-lg-2 col-xl-2 ">
			<img th:src="@{/view/MyWork/images/surveymonkey.png}" width="50px" class="mr-5">
		</div>
		<div class="col-xs-10 col-sm-10 col-lg-10 col-xl-10 ">
			<p th:text="${sondaggi.titolo}"></p>
			<a th:href="@{${sondaggi.contenuto}}" target="blank"> clicca qui</a>


				<br>
			<div th:if="${GS}">
				<button type="submit" name="modifica"  data-toggle="modal" th:attr="data-target='#myModal' + ${sondaggi.id}"
						style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 3px; width: 70px; margin-bottom: 5px;">
					Modifica
				</button>
			<!-- The Modal -->
			<div class="modal" th:id="'myModal' + ${sondaggi.id}" th:if="${sondaggi!=null}">
				<div class="modal-dialog">
					<div class="modal-content">

						<!-- Modal Header -->
						<div class="modal-header">
							<h4 class="modal-title" style="color: black;">
								Modifica sondaggio</h4>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>

						<!-- Modal body -->
						<div class="modal-body">
						<h1 th:text="${sondaggi.id}"></h1>
							<form th:object="${sondaggio}" th:action="@{'/my-work/sondaggi/modifica/' +${sondaggi.id}}" onsubmit="return validateForm()"
								  method="post" enctype="multipart/form-data"  class="signin-form">
								<div id="message-error" class="row justify-content-center mt-2">
			  					</div>
								<div class="form-group col-12">
									<label for="aforisma" style="color: black"> Nome sondaggio </label>
									<input type="text"  name="nomeSondaggio"  th:placeholder="${sondaggi.titolo}" class="form-control"  id="input"  required>
								</div>

								<div class="form-group col-12">
									<label for="autore"  style="color: black"> Link esterno per il sondaggio </label>
									<input type="url"  name="link"  th:placeholder="${sondaggi.contenuto}" class="form-control"  id="input" required>
								</div>

								<div class="form-group col-4">
									<input class="form-control" type="submit" id="pubblicaSubmit" value="Modifica">
								</div>
							</form>
						</div>

						<!-- Modal footer -->
						<div class="modal-footer">
							<button type="button" class="btn btn-danger"
									data-dismiss="modal">Chiudi</button>
						</div>

					</div>

				</div>
			</div>
			<form
					th:action="@{'/my-work/sondaggi/delete/' +${sondaggi.id}}"
					method="post" style="display: inline-block">

				<button type="submit" name="elimina"
						style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 3px; width: 70px;">
					Elimina
				</button>
			</form>
			</div>


		</div>
	</div>
</div>

</div>

</div>

<!-- PANNELLO FOOTER CON INFO-->
<footer class="align-items-center" style="margin-top: 360px;">
	<div class="container align-items-center mt-4"
	style="margin-top: 40px">
	<div class="row justify-content-center align-items-center mt-3 pt-4"
	style="margin-top: 15px; padding-top: 15px;">
	<div class="col-sm-4 col-lg-4">
		<a href="https://erretechnology.com/" target="blank"><img
			th:src="@{/view/MyWork/images/errelogowhite.png}" height="80px"
			alt="erre_logo" style="margin: auto"></a>
		</div>
		<div class="col-sm-4 col-lg-4">
			<img th:src="@{/view/MyWork/images/thegate.png}" width="100%"
			style="margin: auto;">
			<p style="color: #F3F3F3; text-align: center; font-size: 20px;">
				Supporto: +39 011 197 429 00</p>
			</div>
			<div class="col-sm-4 col-lg-4 pl-5" style="padding-left: 150px">
				<a class="rounded-circle fa fa-facebook"
				href="https://www.facebook.com/erretechnologygroup/"
				target="blank"></a> <a class="rounded-circle fa fa-linkedin ml-2"
				href="https://www.linkedin.com/company/erretechnologygroup/"
				style="margin-left: 10px" target="blank"></a>
			</div>
		</div>
	</div>
</footer>
<script>
function validateForm(){
	if(document.getElementById("input").value.trim() == ""){
		let p = "<p class='p text-danger'>Il campo nome non puo' contenere solo spazi</p>" + "<br>";
   		 $("#message-error > p").remove();
   		 $("#message-error").append(p);
   		 return false;
	} return true;
}
</script>
</body>
</html>
