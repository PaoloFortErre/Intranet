<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
<title>MyLife</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="pagina di mylife con bacheca dell'intranet di erretechnology">

<!-- Add icon library -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>

<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
	integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
	crossorigin="anonymous">


<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
	integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"
	integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF"
	crossorigin="anonymous"></script>

<link
	href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.css"
	rel="stylesheet" />
<link rel="stylesheet" content-type="" th:href="@{/view/cssGio/style.css}">
<link href='https://fonts.googleapis.com/css?family=Montserrat'
	rel='stylesheet' type='text/css'>


</head>
<body ng-app=""
	th:with="GML = ${#authorization.expression('hasAuthority(''GML'')')}"
	th:style="'background-image: url(' + @{/view/MyWork/images/carbonio.jpg} +');'">

<nav class="navbar navbar-expand-lg bg-dark navbar-dark justify-content-end">
	<a class="navbar-brand logo" th:href="@{/homepage/}"><img
			th:src="@{/view/MyWork/images/casabianca.png}" width="30px"
			alt="homeBianca.png" style="opacity: 0.9" class="img-fluid"></a> 
	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
    <ul class="navbar-nav">
    <li class="nav-item mr-3 mt-3"><a class="nav-link"
					th:href="@{/my-work/}">MY WORK</a></li>
				<li class="nav-item mr-3 mt-3"><a class="nav-link"
					th:href="@{/my-work/comunicazioni/}">COMUNICAZIONI HR</a></li>
				<li class="nav-item mr-3 mt-3"><a class="nav-link"
					th:href="@{/my-work/comunicazioni/moduli/}">MODULI</a></li>
				<li class="nav-item mr-3 mt-3"><a class="nav-link"
					href="http://polyedro.erretechnology.com/www/" target="blank">POLYEDRO</a>
				</li>
       
        <li th:if="${utenteDati.setNotifiche != null}"
					class="nav-item avatar dropdown " style="cursor: pointer"><a
					class="nav-link dropdown-toggle waves-effect waves-light"
					id="navbarDropdownMenuLink-5" data-toggle="dropdown"
					aria-haspopup="true" aria-expanded="true"> <span
						class="badge badge-danger mr-n4"
						th:text="${utenteDati.setNotifiche.size}"></span> <i
						class="fa fa-bell mr-n4"></i>
				</a>
					<div
							class="dropdown-menu scrollable-menu dropdown-menu-right dropdown-secondary"
						th:if="${utenteDati.setNotifiche.size > 0}"
						aria-labelledby="navbarDropdownMenuLink-5">
						<div class="dropdown-item waves-effect waves-light"
							th:each="i:${#numbers.sequence(utenteDati.setNotifiche.size() - 1, 0, -1)}"
							th:with="notifica=${utenteDati.setNotifiche[i]}">
							<a
								th:href="@{/profilo/elimina-notifica/{id}(id = ${notifica.id})}"><div>
									<p class="font-weight-bold"
										th:text="${notifica.utente.nome} + ' ' + ${notifica.utente.cognome}+ ' ' "
										style="COLOR: BLACK"></p>
									<p class="mt-n3" th:text="${notifica.descrizione}"
										style="COLOR: BLACK"></p>
									<p class="p mt-n2"
										th:utext="${#dates.format(notifica.timestamp*1000, 'dd/MM/yyyy, HH:mm')}"
										style="font-size: 10px; color: black"></p>
								</div></a>
							<hr>
						</div>
					</div></li>
					<li class="nav-item"><a th:href="@{/profilo/}"><img
						th:src="'data:image/jpeg;base64,' + ${utenteDati.immagine.getImgData(utenteDati.immagine.data)}"
						alt="utente" title="utente" class="immagineUtente img-fluid"
						id="utente-foto-profilo" style="border-radius: 50%;"></a></li>
    </ul>
  </div>  
</nav>

	<div id="demo" class="carousel slide" data-ride="carousel"
		style="width: 100%">
		<ul class="carousel-indicators">
			<li data-target="#demo" data-slide-to="0" class="active"></li>
			<li data-target="#demo" data-slide-to="1"></li>
	
			<li data-target="#demo" data-slide-to="2"></li>

		</ul>
		<div class="carousel-inner">
			<div class="carousel-item active">
				<img th:src="@{/view/MyLife/images/mylife1.png}" alt="ferrari"
					title="ferrari" width="100%" height="500" class="img-fluid" style=" filter:brightness(50%);">
				<div class="carousel-caption" th:if="${aforisma.size>0}">
					<h1
						style="font-weight: 900; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"
						th:text="${aforisma[0].titolo}"></h1>
					<p th:text="${aforisma[0].contenuto}"
						style="font-style: italic; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"></p>
					<div th:if="${GML}">
						<form th:action="@{'/aforisma/update/'+${aforisma[0].id}}"
							method="get">
							<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 8px; width: 150px;">
								Modifica aforisma
								<!-- <img src="/view/MyWork/images/edit.png" width="50px" height="20px">-->
							</button>
						</form>
					<!--  	<a th:href="@{/aforisma/life/new/}"
							style="display: inline-block; color: black; background-color: white; font-size: 12px; padding: 8px; text-decoration: none; width: 150px;">
							Aggiungi aforisma <!--  <img src="/view/MyWork/images/more.png" width="30px"  height="20px"
									style="margin-bottom: 10px; display: inline-block">
						</a> -->
					</div>
				</div>
			</div>
			<div class="carousel-item">
				<img th:src="@{/view/MyLife/images/mylife2.png}" alt="scarpe" width="100%"
					height="500" class="img-fluid" style=" filter:brightness(50%);">
				<div class="carousel-caption" th:if="${aforisma.size>1}" >
					<h1
						style="font-weight: 900; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"
						th:text="${aforisma[1].titolo}"></h1>
					<p th:text="${aforisma[1].contenuto}"
						style="font-style: italic; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"></p>
					<div th:if="${GML}">
						<form th:action="@{'/aforisma/update/'+${aforisma[1].id}}"
							method="get">
							<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 8px; width: 150px;">
								Modifica aforisma
								<!-- <img src="/view/MyWork/images/edit.png" width="50px" height="20px">-->
							</button>
						</form>
			<!--  			<a th:href="@{/aforisma/new/}"
							style="display: inline-block; color: black; background-color: white; font-size: 12px; padding: 8px; text-decoration: none; width: 150px;">
							Aggiungi aforisma < <img src="/view/MyWork/images/more.png" width="30px"  height="20px"
									style="margin-bottom: 10px; display: inline-block">
						</a> -->
					</div>
				</div>
			</div>
			<div class="carousel-item">
				<img th:src="@{/view/MyLife/images/mylife3.png}" alt="scarpe" width="100%"
					height="500" class="img-fluid" style=" filter:brightness(50%);">
				<div class="carousel-caption" th:if="${aforisma.size>2}">
					<h1
						style="font-weight: 900; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"
						th:text="${aforisma[2].titolo}"></h1>
					<p th:text="${aforisma[2].contenuto}"
						style="font-style: italic; text-shadow: 3px 1px 1px rgba(0, 0, 0, 1);"></p>
					<div th:if="${GML}">
						<form th:action="@{'/aforisma/update/'+${aforisma[2].id}}"
							method="get">
							<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 8px; width: 150px;">
								Modifica aforisma
								<!-- <img src="/view/MyWork/images/edit.png" width="50px" height="20px">-->
							</button>
						</form>
				<!--		<a th:href="@{/aforisma/new/}"
							style="display: inline-block; color: black; background-color: white; font-size: 12px; padding: 8px; text-decoration: none; width: 150px;">
							Aggiungi aforisma   <img src="/view/MyWork/images/more.png" width="30px"  height="20px"
									style="margin-bottom: 10px; display: inline-block">
						</a>-->
					</div>
				</div>
			</div>

		</div>
		<a class="carousel-control-prev" href="#demo" data-slide="prev"> <span
			class="carousel-control-prev-icon"></span>
		</a> <a class="carousel-control-next" href="#demo" data-slide="next">
			<span class="carousel-control-next-icon"></span>
		</a>
	</div>



	<!-- ************
			FINE HEADER
			***************** -->
	<div class="container">




		<div class="row" style="margin-top: 5%">


			<!-- ****
				COLONNA SINISTRA
				**** -->
			<div class="col-xs-2 col-sm-4 col-lg-2">
				<div class="col-sinistra">

					<img th:src="@{/view/MyLife/images/tori.jpg}" width="100%"
						style="border-radius: 6px 6px 0px 0px"> <img
						th:src="'data:image/jpeg;base64,' + ${utenteDati.immagine.getImgData(utenteDati.immagine.data)}"
						alt="utente" title="utente" class="immagineUtente fixed"
						style="margin: 0 auto; position: absolute; left: 32%; top: 57px;">
					<br> <br> <br> <br>
					<div style="margin: 0 auto; text-align: center">
						<a th:href="@{/profilo/}"
							th:text="${utenteDati.nome} + ' ' + ${utenteDati.cognome}"
							style="color: #303030; font-weight: 600; font-size: 18px;"></a> <br>
						<p th:text="${utenteDati.settore.nomeSettore}"
							style="color: #303030; opacity: 0.7;"></p>
					</div>
					<br>
					<div id="prof">
						<a th:href="@{/profilo/}" id="gestisciProfilo"> Gestisci il
							tuo profilo</a>
					</div>
					<div id="prof2">
						<a th:href="@{/my-life/profili-utenti/}" id="gestisciProfilo">
							Vedi il profilo dei tuoi colleghi</a>
					</div>
					<br>
				</div>
			</div>


			<div class="col-sm-6 col-lg-6"
				th:with="UB = ${#authorization.expression('hasAuthority(''UB'')')},
				DS = ${#authorization.expression('hasAuthority(''DS'')')}">

				<!--  WRITE A POST  -->
				<div class="col-sinistra">
					<div class="row" th:if="${UB}">
						<div class="col-sm-4 col-md-2 col-lg-2">


							<img
								th:src="'data:image/jpeg;base64,' + ${utenteDati.immagine.getImgData(utenteDati.immagine.data)}"
								alt="utente" title="utente" class="immagineUtente"
								style="margin: 20px; margin-left: 17px">
						</div>
						<div class="col-sm-8 col-md-10 col-lg-10">
							<div class="form-group">
								<form th:action="@{/my-life/add-post}"
									enctype="multipart/form-data" id="myForm1" method="post"
									onsubmit="return validateForm()">
									<label for="testo"></label>
									<textarea class="form-control" rows="2" cols="30" name="testo"
										style="width: 98%" placeholder="Scrivi un post..." id="post"></textarea>

									<button type="button" data-toggle="modal"
										style="background-color: #E8E7E7; color: #303030; border: 0px solid #E8E7E7"
										data-target="#myModal">
										Immagine<img th:src="@{/view/MyLife/images/img.png}"
											style="width: 30px; height: 30px; display: inline-block; margin-left: 5px;">
									</button>

									<!-- Modal -->
									<div class="modal fade" id="myModal" role="dialog">
										<div class="modal-dialog">

											<!-- Modal content-->
											<div class="modal-content">
												<div class="modal-header">
													<button type="button" class="close" data-dismiss="modal">&times;</button>
													<h4 class="modal-title" style="color: black">Scegli
														un'immagine da condividere</h4>
												</div>
												<div class="modal-body">
													<input type="file" name="document" id="img"
														accept="image/png, image/jpeg ,image/jpg" style="color: black;" />
												</div>
												<div class="modal-footer">
													<button type="button" class="btn btn-default"
														data-dismiss="modal">Close</button>
												</div>
											</div>

										</div>
									</div>

									<div>
										<div id="delete" style="display: none">
											<button type="button" class="close" aria-label="Close"
												onclick="remove()">
												<span aria-hidden="true"
													style="color: red; font-size: 40px; margin-right: 20px; opacity: 0.9">X</span>
											</button>
											<img id="previewImg" src="#" alt="Immagine Caricata"
												width="70%" height="70%" />
										</div>



									</div>




									<br> <input type="submit" value="Condividi"
										id="submitPost"
										style="float: right; margin-right: 10px; margin-bottom: 8px" />

								</form>
							</div>
						</div>
					</div>


					<!-- ****************

						POST PUBBLICATI
						IN BACHECA

						**************** -->

				</div>
				<hr>
				<div class="col-sinistra" style="margin-top: 20px"
					th:each="post:${messaggi}">
					<div class="container-fluid">
						<div class="row">

							<!-- INFORMAZIONI SU UTENTE E POST -->

							<div style="margin-top: 30px;">
								<!-- FOTO PROFILO -->
								<div class="row">
									<div class="col-sm-3 col-md-3 col-lg-2">
										<img
											th:src="'data:image/jpeg;base64,' + ${post.autore.immagine.getImgData(post.autore.immagine.data)}"
											title="utente" class="immagineUtente"
											style="margin: 20px; margin-top: 0px"> <img
											th:src="'data:image/png;base64,' + ${post.autore.settore.getImgData(post.autore.settore.logoBlack)}"
											width="80%"
											style="opacity: 0.8; margin: 20px; margin-top: -7px"
											id="imgSettore">
									</div>


									<div class="col-sm-9 col-md-9 col-lg-9">
										<a  th:onclick="nome([[${post.autore.id}]], 'post')" th:id="'post' + ${post.autore.id}"
											th:text="${post.autore.nome} + ' ' + ${post.autore.cognome}"
											style="cursor:pointer; display: inline-block; color: #303030; font-weight: 600; font-size: 20px;"></a>

										<!--  <h4
											style="display: inline-block; color: #303030; font-weight: 600;"
											th:text="${post.autore.cognome}"></h4>-->
										<p
											style="font-size: 12px; font-style: italic; color: #303030;"
											th:text="${#dates.format(post.timestamp*1000, 'dd/MM/yyyy, HH:mm')}"></p>
										<!-- ELIMINA POST -->

										<div
											th:if="(${DS} or ${post.autore.id} == ${session.id}) and ${UB}"
											style="display: inline-block; color: #303030;">

											<form th:action="@{/my-life/delete-post(id=${post.id})}"
												method="post">
												<button name="button" type="submit" class="buttonAzioni"
													style="background-color: #E8E7E7; color: white; margin-left: 290px; border: 0px solid #303030">
													<img th:src="@{/view/MyLife/images/trash.png}" width="55%">
												</button>
											</form>
										</div>
										<div th:if="(${post.autore.id} == ${session.id}) and ${UB}"
											style="display: inline-block;">
										<!-- MODAL MODIFICA POST -->
										<div class="modal" th:id="'postModal' + ${post.id}">
						                  <div class="modal-dialog">
						                    <div class="modal-content " >
						                      <div class="modal-header">
						                        <h4 class="modal-title" style="color: black;">Modifica il tuo post</h4>
						                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
						                          <span aria-hidden="true">&times;</span>
						                        </button>
						                      </div>
						                      <div class="modal-body">
						                        <div class="container">
						                        <form th:action="@{/my-life/edit-post(id=${post.id})}" method="post" enctype="multipart/form-data" novalidate>
						                          <textarea th:class="postModificato + ${post.id}"
													name="testo" placeholder="Modifica post" cols="20"
													rows="4.5" id="post" th:text="${post.testo}"
													style="width: 430px; color: BLACK;" ></textarea><br>
												<input type="file" name="document"
													style="color: black;"
													th:class="editfoto +  ${post.id}">

						                        </div>
						                      </div>
						                      <div class="modal-footer">
						                        <button type="button" class="btn btn-danger" data-dismiss="modal">ANNULLA</button>
							                    
							                 		<button type="submit" class="btn btn-success">CONFERMA</button>
							                    </form>
						                      </div>
						                    </div>
						                  </div>
						                </div>

										<!-- MODIFICA POST -->
										<div class="container text-center mt-2" data-toggle="modal" th:attr="data-target='#postModal' + ${post.id}">
											<button name="button" type="submit" style="background-color: transparent; 
												color: white; border: 0px solid #303030;" class="buttonAzioni">
												<img th:src="@{/view/MyLife/images/edit.png}" width="45%">
											</button>
										</div>

									</div>

									</div>
									<!--  <img th:src="'data:image/png;base64,' + ${utenteDati.settore.getImgData(utenteDati.settore.logo)}"
									width="14%" style="opacity: 0.8;">-->
								</div>
								<!-- CONTENUTO DEL POST -->
								<div>
									<br>
									<div
										style="width: 100%; padding-left: 17px; padding-right: 17px;">
										<p
											style="margin-right: 15px; font-size: 18px; color: #303030;"
											th:text="${post.testo}">
											<a href="">vedi altro</a>
										</p>
									</div>


									<div th:if="${post.immagine!=null}">
										<img
											th:src="'data:image/jpeg;base64,' + ${utenteDati.immagine.getImgData(post.immagine.data)}"
											width="100%" height="40%">
									</div>
									<div>

										<img th:src="@{/view/MyWork/images/like2.png}" width="30"
												style="margin-left: 17px;" th:if="${post.setUtenti.size > 0}"><button type="button" th:if="${post.setUtenti.size > 0}"
											data-toggle="modal"
											th:data-target="${'#myModalLike' + post.id}"
											th:text="${post.setUtenti.size}"
											style="color: #303030; background-color: transparent;
											border: 0px solid; font-size: 25px; margin-top: 17px;">

										</button>
										<!-- <a th:if="${post.setUtenti.size > 0}"
											style="color: #303030; font-size: 14px;"><b
											th:text="${post.setUtenti.size}"></b></a>-->

										<br>
										<hr>
										<form th:action="@{/my-life/like-post(id=${post.id})}"
											method="post" style="display: inline-block;">
											<button type="submit" class="miPiaceBtn"
												th:id="'postLike' + ${post.id}" th:value="${post.id}">

												<!-- <div th:each="utente : ${post.setUtenti}">
													<div th:if="${utente.id} == ${session.id}">

													</div>
												</div> -->
												<img th:src="@{/view/MyWork/images/like.png}" width="20"
													th:id="'imgLike' + ${post.id}"> Mi piace
											</button>

										</form>
										<!-- <script>
													$(document).ready(function(){
														console.log("A : " + this );
														$("#miPiaceBtn").toggleClass("buttonClicked");
													});

													</script> -->
										<button class="CommentaBtn"
											th:onclick="'mostraTextarea(' + ${post.id} + ')'">
											<img th:src="@{/view/MyWork/images/comment.png}" width="20">Commenta
										</button>
									</div>

									<!-- The Modal -->
									<div class="modal" th:id="${'myModalLike' + post.id}"
										style="color: #303030">
										<div class="modal-dialog">
											<div class="modal-content">

												<!-- Modal Header -->
												<div class="modal-header">
													<h4 class="modal-title"
														style="font-size: 22px; color: #303030">
														Colleghi a cui piace il <span
															style="font-style: italic; font-weight: 900; font-size: 25px; margin-bottom: -5PX;">
															Post </span>
													</h4>
													<button type="button" class="close" data-dismiss="modal">&times;</button>
												</div>

												<!-- Modal body -->
												<div class="modal-body" th:each="utente : ${post.setUtenti}"
													th:if="${post.setUtenti.size > 0}" style="background-color: #B9CAF0;" >
													<a th:onclick="nome([[${utente.id}]], 'like')" th:id="'like' + ${utente.id}" style="cursor:pointer;">
													<img th:src="'data:image/jpeg;base64,' + ${utente.immagine.getImgData(utente.immagine.data)}"
													title="utente" class="immagineUtente img-fluid" style="border-radius: 50%;"></a>
													<a th:onclick="nome([[${utente.id}]], 'span')" th:id="'span' + ${utente.id}" >
													<span th:text="${utente.nome} + ' ' + ${utente.cognome}" style="cursor:pointer; color: #303030" /></a>
												</div>

												<!-- Modal footer -->
												<div class="modal-footer">
													<button type="button" class="btn btn-primary"
														data-dismiss="modal">Close</button>
												</div>

											</div>
										</div>
									</div>
								</div>
								<!-- ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ COMMENTO ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½-->
								<div class="col-xs-5 col-sm-10 col-md-11 col-lg-11"
									style="margin-top: 20px; margin-left: 15px; margin-bottom: 6px;"
									th:each="commento : ${post.setCommenti}"
									th:if="${commento.visibile}" id="commento">
									<table id="tableCommento">
										<tr>
											<td><img
												th:src="'data:image/jpeg;base64,' + ${commento.autore.immagine.getImgData(commento.autore.immagine.data)}"
												width="50px" style="border-radius: 50%"> <a
												th:onclick="nome([[${commento.autore.id}]], 'commento')" th:id="'commento' + ${commento.autore.id}"
												class="nomeCommento"
												th:text="${commento.autore.nome} + ' ' + ${commento.autore.cognome}"
												style="cursor:pointer; color: #303030; font-size: 14px;"></a>


												<p
													style="display: inline-block; font-style: italic; font-size: 10px; color: #303030;"
													th:text="${#dates.format(commento.timestamp*1000, 'dd/MM/yyyy, HH:mm')}">
												</p></td>
											<td
												th:if="(${DS} or ${commento.autore.id} == ${session.id} or ${post.autore.id} == ${session.id}) and ${UB}"><br>
												<br> <br>
												<form
													th:action="@{/my-life/delete-commento(id=${commento.id})}"
													method="post">
													<button name="button" type="submit" id="bottoneElimina">
														<img th:src="@{/view/MyLife/images/trash.png}" width="23px">
													</button>
												</form></td>
												
										<td>
											<div th:if="${commento.autore.id} == ${session.id} and ${UB}"
											style="display: inline-block;">
										<!-- MODAL MODIFICA COMMENTO -->
										<div class="modal" th:id="'commentoModal' + ${commento.id}">
						                  <div class="modal-dialog">
						                    <div class="modal-content " >
						                      <div class="modal-header">
						                        <h4 class="modal-title" style="color: black;">Modifica il tuo commento</h4>
						                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
						                          <span aria-hidden="true">&times;</span>
						                        </button>
						                      </div>
						                      <div class="modal-body">
						                        <div class="container">
						                        <form th:action="@{/my-life/edit-commento(id=${commento.id})}" method="post">
						                          <textarea th:class="commentoModificato + ${commento.id}"
														name="testo" id="post" placeholder="Modifica commento"
														required rows="4.5" th:text="${commento.testo}"
														style="color: black; width: 430px"></textarea>

						                        </div>
						                      </div>
						                      <div class="modal-footer">
						                        <button type="button" class="btn btn-danger" data-dismiss="modal">ANNULLA</button>
							                    
							                 		<button type="submit" class="btn btn-success">CONFERMA</button>
							                    </form>
						                      </div>
						                    </div>
						                  </div>
						                </div>

										<!-- MODIFICA COMMENTO -->
										<div class="container text-center mt-2" data-toggle="modal" th:attr="data-target='#commentoModal' + ${commento.id}">
											<button name="button" id="bottoneModifica">
												<img th:src="@{/view/MyLife/images/edit.png}" width="23px" style="margin-right: 10px;">
											</button>
										</div>

									</div>	
													
											</td>
										</tr>
										<tr>
											<td>
												<p th:text="${commento.testo}"
													style="color: #303030; margin-left: 60px;"></p>
											</td>
										</tr>
									</table>
								</div>
								<br>
								<div th:if="${UB}" th:id="'commentoArea' + ${post.id}"
									style="display: none">
									<form th:action="@{/my-life/add-commento(idPost=${post.id})}"
										method="post">
										<label for="testo"></label>

										<textarea id="post" name="testo" rows="2" cols="30"
											style="width: 91%; padding: 8px; margin-left: 15px; color: #303030;"
											placeholder="Lascia un commento..." required></textarea>
										<input type="submit" value="Commenta" id="submitPost"
											style="margin-bottom: 10px; font-size: 13px;" />

									</form>
								</div>



							</div>
						</div>
					</div>
				</div>
				<div th:if="${messaggi.totalPages>0}"
					style="background-color: #303030; margin-top: -10px;">

					<p style="text-align: center">
						Pages <span th:text="${pageNumber}"></span> <span
							th:text="${pageNumber}"></span>
					</p>
					<table
						style="margin: 0 auto; margin-bottom: 20px; background-color: #303030">
						<tr>
							<td th:each="pageNumber : ${pageNumbers}"><a
								th:href="@{/my-life/(page=${pageNumber})}"
								th:text="${pageNumber}"
								th:class="${pageNumber==messaggi.number + 1 } ? active"
								style="color: #F3F3F3; font-size: 18px; padding: 10px;"> </a><br>
								<br></td>
						</tr>
					</table>
				</div>
			</div>


			<!-- ****s
COLONNA DESTRA
**** -->
			<div class="col-sm-4 col-lg-4" id="col-destra">
				<br>
				<div>
					<div th:if="${GML}">
						<br> <a th:href="@{/my-life/eventi/aggiungi/}"> <img
							th:src="@{/view/MyWork/images/moreb.png}" width="30px"
							style="float: right; margin-bottom: 10px;"></a>
					</div>

					<h2 id="culturaPiemonte" style="margin-top: 30px">Eventi</h2>

					
					<p th:if="${eventilife==null}"
						style="text-align: center; color: #303030;">Non ci sono eventi
						in prossimità</p>
					<div id="demo1" class="carousel slide" data-ride="carousel">
					<br><ul class="carousel-indicators mt-5">
						<li data-target="#demo1" data-slide-to="0" class="active"></li>
						<li data-target="#demo1" data-slide-to="1" th:if="${eventilife.size>1}" ></li>
						<li data-target="#demo1" data-slide-to="2" th:if="${eventilife.size>2}"></li>
					</ul>
					<br><div class="carousel-inner" th:if="${eventilife.size>0}" >
						<div class="carousel-item active" th:if="${eventilife[0].foto!=null}">
							
						
							<img th:src="'data:image/png;base64,' + ${eventilife[0].getImgData(eventilife[0].foto)}" width="100%" style="height: 450px"  >
							<br>
								<h3 th:text="${eventilife[0].titolo}" style="text-align: center; font-size: 30px; font-weight: bold; color: #303030" class="mt-3"></h3>
								<p th:text="${#dates.format(eventilife[0].timestamp*1000, 'dd/MM/yyyy')}"  style="text-align: center; color: #303030" ></p>
								<div style="margin: 0 auto; text-align: center" th:if="${GML}">
								<form th:action="@{'/my-life/eventi/update/'+${eventilife[0].id}}"
								th:if="${GML}" method="get" style="display: inline-block; ">
								<button type="submit" name="modifica"
									style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Modifica
								</button>
							</form>
							<form th:action="@{'/my-life/eventi/delete/'+${eventilife[0].id}}"
								th:if="${GML}" method="get" style="display: inline-block;">
								<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Elimina
								</button>
							</form>
							</div>
						</div>
						<div class="carousel-item" th:if="${eventilife.size>1}">
							<img th:src="'data:image/png;base64,' + ${eventilife[1].getImgData(eventilife[1].foto)}" style="height: 450px" >
							<br>
								<h3 th:text="${eventilife[1].titolo}"  style="text-align: center;color: #303030; font-size: 30px; font-weight: bold;" class="mt-3" ></h3>
								<p th:text="${#dates.format(eventilife[1].timestamp*1000, 'dd/MM/yyyy')}"  style="text-align: center; color: #303030" ></p>
							<div style="margin: 0 auto; text-align: center" th:if="${GML}">
								<form th:action="@{'/my-life/eventi/update/'+${eventilife[1].id}}"
								th:if="${GML}" method="get" style="display: inline-block;">
								<button type="submit" name="modifica"
									style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Modifica
								</button>
							</form>
							<form th:action="@{'/my-life/eventi/delete/'+${eventilife[1].id}}"
								th:if="${GML}" method="get" style="display: inline-block;">
								<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Elimina
								</button>
							</form>
							</div>
						</div>
						<div class="carousel-item" th:if="${eventilife.size>2}">
							<img th:src="'data:image/png;base64,' + ${eventilife[2].getImgData(eventilife[2].foto)}" style="height: 450px" >
							<br><h3 th:text="${eventilife[2].titolo}"  style="text-align:  center;color: #303030;font-size: 30px; font-weight: bold;" class="mt-3"></h3>
								<p th:text="${#dates.format(eventilife[2].timestamp*1000, 'dd/MM/yyyy')}"  style="text-align: center; color: #303030"  ></p>
						<div style="margin: 0 auto; text-align: center" th:if="${GML}">
								<form th:action="@{'/my-life/eventi/update/'+${eventilife[2].id}}"
								th:if="${GML}" method="get" style="display: inline-block;">
								<button type="submit" name="modifica"
									style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Modifica
								</button>
							</form>
							<form th:action="@{'/my-life/eventi/delete/'+${eventilife[2].id}}"
								th:if="${GML}" method="get" style="display: inline-block;">
								<button type="submit" name="modifica"
								style="background-color: white; border: 0px solid #232323; display: inline-block; color: black; font-size: 12px; padding: 5px; width: 100px;">
									Elimina
								</button>
							</form>
							</div>
						</div>
					</div>
					<a class="carousel-control-prev" href="#demo1" data-slide="prev">
						<span class="carousel-control-prev-icon" th:if="${eventilife.size>1}"></span>
					</a> <a class="carousel-control-next" href="#demo1" data-slide="next">
						<span class="carousel-control-next-icon" th:if="${eventilife.size>1}"></span>
					</a>
				</div>
				</div>
				<br> <br>
				<hr style="border: 1px solid #c9c9c9">
				<div th:if="${GML}">
					<br>
					<div>
						<a th:href="@{/my-life/film-serie/aggiungi/}"> <img
							th:src="@{/view/MyWork/images/moreb.png}" width="30px"
							style="float: right; margin-bottom: 10px;"></a>
					</div>
				</div>
				<br>
				<h2 id="culturaPiemonte">Cinema e serie TV</h2>
				<p
					style="color: #303030; text-align: center; font-size: 15px; margin-bottom: 50px;">
					Se sei un tipo da cinema o serie TV:</p>
				<p th:if="${film==null}"
					style="text-align: center; color: #303030; font-style: italic; font-size: 12px;">
					Non ci sono film da consigliare</p>




				<div>

					<div id="primoFilm" th:if="${film.size > 0}">

						<div class="caption">
							<img
								th:src="'data:image/png;base64,' + ${film[0].getImgData(film[0].foto)}"
								class="img-fluid">

							<h3 th:text="${film[0].titolo}" style="color: white;"></h3>
						</div>
						<p style="color: black">Ecco dove lo potrai trovare:</p>
						<p th:text="${film[0].contenuto}" style="color: blue;">
						<div th:if="${GML}">
							<form th:action="@{'/my-life/film-serie/update/'+${film[0].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyWork/images/editb.png}" width="38%">
								</button>
							</form>
							<form th:action="@{'/my-life/film-serie/delete/'+${film[0].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyLife/images/trash.png}" width="38%">
								</button>
							</form>
						</div>
					</div>
					<div id="secondoFilm" style="display: none;" th:if="${film.size>1}">
						<div class="caption">
							<img
								th:src="'data:image/png;base64,' + ${film[1].getImgData(film[1].foto)}"
								class="img-fluid">

							<h3 th:text="${film[1].titolo}" style="color: white;"></h3>
						</div>
						<p style="color: black">Ecco dove lo potrai trovare:</p>
						<p th:text="${film[1].contenuto}" style="color: blue;">
						<div th:if="${GML}">
							<form th:action="@{'/my-life/film-serie/update/'+${film[1].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyWork/images/editb.png}" width="38%">
								</button>
							</form>
							<form th:action="@{'/my-life/film-serie/delete/'+${film[1].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyLife/images/trash.png}" width="38%">
								</button>
							</form>
						</div>
					</div>
					<div id="terzoFilm" style="display: none;" th:if="${film.size>2}">
						<div class="caption">
							<img
								th:src="'data:image/png;base64,' + ${film[2].getImgData(film[2].foto)}"
								class="img-fluid">

							<h3 th:text="${film[2].titolo}" style="color: white;"></h3>
						</div>
						<p style="color: black">Ecco dove lo potrai trovare:</p>
						<p th:text="${film[2].contenuto}" style="color: blue;">
						<div th:if="${GML}">
							<form th:action="@{'/my-life/film-serie/update/'+${film[2].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyWork/images/editb.png}" width="38%">
								</button>
							</form>
							<form th:action="@{'/my-life/film-serie/delete/'+${film[2].id}}"
								th:if="${GML}" method="get">
								<button type="submit" name="modifica"
									style="background-color: transparent; border: 0px solid #232323;">
									<img th:src="@{/view/MyLife/images/trash.png}" width="38%">
								</button>
							</form>
						</div>
					</div>

					<ul class="pagination" style="float: right" th:if="${film.size>0}">

						<li class="page-item" th:if="${film.size>0}"><a href="" onclick="film1()" id="C"
							class="page-link">1</a></li>
						<li class="page-item" th:if="${film.size>1}"><a href="" onclick="film2()" id="C1"
							class="page-link">2</a></li>
						<li class="page-item" th:if="${film.size>2}"><a href="" onclick="film3()" id="C2"
							class="page-link">3</a></li>

					</ul>
					<br>

				</div>
				<br> <br>
				<hr style="border: 1px solid #c9c9c9">
				<br>
				<div>
					<div th:if="${GML}">
						<a th:href="@{/my-life/libri/aggiungi}"> <img
							th:src="@{/view/MyWork/images/moreb.png}" width="30px"
							style="float: right; margin-bottom: 10px;"></a>
					</div>
					<h2 id="culturaPiemonte">Libri</h2>
					<p
						style="color: #303030; text-align: center; font-size: 15px; margin-bottom: 50px;">
						Se sei un tipo dal classico libro cartaceo o da Kindle:</p>
					<p th:if="${libri==null}"
						style="text-align: center; color: #303030; font-style: italic; font-size: 12px;">
						Non ci sono libri da consigliare</p>
					<br>
					<table id="libri" th:if="${libri.size > 0}">
						<tr>
							<td><img
								th:src="'data:image/png;base64,' + ${libri[0].getImgData(libri[0].foto)}"
								width="135px" style="padding: 5px;"></td>
							<td><p th:text="${libri[0].titolo}"
									STYLE="margin-left: 5px;; color: #303030;"></p>
								<p
									style="FONT-size: 10px; font-style: italic; text-align: right;; color: #303030;"
									th:text="${libri[0].contenuto}"></p>

								<div>
									<form th:action="@{'/my-life/libri/update/'+${libri[0].id}}"
										th:if="${GML}" method="get">
										<button type="submit" name="modifica"
											style="background-color: transparent; border: 0px solid #232323; float: right;">
											<img th:src="@{/view/MyWork/images/editb.png}" style="float: right"
												width="38%">
										</button>
									</form>
									<form th:action="@{'/my-life/libri/delete/'+${libri[0].id}}"
										th:if="${GML}" method="get">
										<button type="submit" name="modifica"
											style="background-color: transparent; border: 0px solid #232323;">
											<img th:src="@{/view/MyLife/images/trash.png}" width="38%">
										</button>
									</form>

								</div></td>
						</tr>
						<tr th:if="${libri.size>1}">
							<td><img
								th:src="'data:image/png;base64,' + ${libri[1].getImgData(libri[1].foto)}"
								width="135px" style="padding: 5px;"></td>
							<td><p th:text="${libri[1].titolo}"
									STYLE="margin-left: 5px;; color: #303030;"></p>
								<p
									style="FONT-size: 10px; font-style: italic; text-align: right; color: #303030;"
									th:text="${libri[1].contenuto}"></p>
								<div>
									<form th:action="@{'/my-life/libri/update/'+${libri[1].id}}"
										th:if="${GML}" method="get">
										<button type="submit" name="modifica"
											style="background-color: transparent; border: 0px solid #232323; float: right;">
											<img th:src="@{/view/MyWork/images/editb.png}" style="float: right"
												width="38%">
										</button>
									</form>
									<form th:action="@{'/my-life/libri/delete/'+${libri[1].id}}"
										th:if="${GML}" method="get">
										<button type="submit" name="modifica"
											style="background-color: transparent; border: 0px solid #232323;">
											<img th:src="@{/view/MyLife/images/trash.png}" width="38%">
										</button>
									</form>

								</div></td>
						</tr>
					</table>
					<br>
				</div>
			</div>
		</div>
	</div>


	<div class="row" th:if="${video!=null}">
		<div class="col-xs-0 col-sm-0 col-lg-2 col-xl-2 mt-5"></div>
		<div class="col-xs-12 col-sm-12 col-lg-8 col-xl-8 mt-5"
			style="margin-top: 50px;">
			<h1 style="text-align: center;">Il video del mese</h1>
			<a th:href="@{/my-life/aggiungi-videoMyLife/}" th:if="${GML}"
				style="background-color: white; border: 0px solid #232323; color: black; font-size: 12px; padding: 8px; width: 150px; float: right; padding-left: 25px;">
				Aggiungi video</a>
			<h3 style="text-align: center;" class="mb-5"
				th:text="${video.sottoTitolo}"></h3>
			<iframe width="100%" height="800" th:src="${video.link}"
				title="YouTube video player" frameborder="0"
				allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
				allowfullscreen></iframe>

		</div>
		<div class="col-xs-0 col-sm-0 col-lg-2 col-xl-2 mt-5"></div>
	</div>

	<!-- PANNELLO FOOTER CON INFO-->
	<footer class="align-items-center">
		<div class="container mt-4" style="margin-top: 40px">
			<div class="row justify-content-center align-items-center mt-3 pt-4"
				style="margin-top: 15px; padding-top: 15px;">
				<div class="col-auto ">
					<a href="https://erretechnology.com/" target="blank"> <img
						th:src="@{/view/MyWork/images/errelogowhite.png}" height="80px"
						alt="erre_logo" style="margin: auto"></a>
				</div>
				<div class="col-auto">
					<img th:src="@{/view/MyWork/images/thegate.png}" width="100%"
						style="margin: auto;">
					<p style="color: #F3F3F3; text-align: center; font-size: 20px;">
						Supporto: +39 011 197 429 00</p>
				</div>
				<div class="col-auto">
					<a class="rounded fa fa-facebook"
						href="https://www.facebook.com/erretechnologygroup/"
						target="blank"></a> <a class="rounded fa fa-linkedin ml-3"
						href="https://www.linkedin.com/company/erretechnologygroup/"
						style="margin-left: 10px" target="blank"></a>
				</div>
			</div>
		</div>
	</footer>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js">

	</script>
	<script>
		function film1() {
			document.getElementById("secondoFilm").style.display = "none";
			document.getElementById("primoFilm").style.display = "block";
			document.getElementById("terzoFilm").style.display = "none";

		}
		function film2() {
			document.getElementById("secondoFilm").style.display = "block";
			document.getElementById("primoFilm").style.display = "none";
			document.getElementById("terzoFilm").style.display = "none";

		}

		function film3() {
			document.getElementById("terzoFilm").style.display = "block";
			document.getElementById("primoFilm").style.display = "none";
			document.getElementById("secondoFilm").style.display = "none";

		}
		function mostraTextarea(id) {
			console.log(id);

			document.getElementById("commentoArea" + id).style.display = "block";

		}

		function readURL(input) {
			if (input.files && input.files[0]) {
				var reader = new FileReader();

				reader.onload = function(e) {
					$('#previewImg').attr('src', e.target.result);
					$('#previewImg').show();
				}
				$('#delete').show();
				reader.readAsDataURL(input.files[0]); // convert to base64 string
			}
		}

		$("#img").change(function() {
			document.getElementById("post").required = false;
			readURL(this);
		});

		function remove() {
			$('#img').val("");
			$('#previewImg').val("");
			$('#delete').hide();
			document.getElementById("post").required = true;
		}
		
		function nome(id, type){
			var path = "[[@{/profilo/visualizza/?id=}]]";
			document.getElementById(type + id).href += path + btoa(id);
			console.log(document.getElementById(id).href);
		}

		function validateForm() {
			var x = document.forms["myForm1"]["post"].value;
			var y = document.getElementById("img").value;

			if (y == "" && x == "") {
				swal("Scrivi qualcosa per pubblicare il post");
				return false;
			}

		}

		$(document).ready(
			function() {
				var bottoni = document.getElementsByClassName("miPiaceBtn");
				var path = "[[@{/my-life/autore-post?id=}]]";
				for (var i = 0; i < bottoni.length; i++) {
					var id = bottoni[i].id;
					var last_index = id.indexOf("e");
					id = id.substr(last_index + 1);
					$.ajax({
						type : 'GET',
						url : path + id,
						async : false,
						success : function(data) {
							if (data) {
								$('#postLike' + id).css('color', '#0C4FFF');
								$('#postLike' + id).css('background-color','#cce5ff');
								$('#postLike' + id).css('font-weight','bold');
								$('#postLike' + id).css('padding', '8px');
								$('#postLike' + id).css('border-radius','5px');
							}
						}
					});
				}
			});
	</script>

</body>
</html>
